--- a/net/minecraft/world/level/biome/FeatureSorter.java
+++ b/net/minecraft/world/level/biome/FeatureSorter.java
@@ -3,6 +_,7 @@
 import com.google.common.collect.ImmutableList;
 import com.google.common.collect.Lists;
 import it.unimi.dsi.fastutil.objects.Object2IntMap;
+import it.unimi.dsi.fastutil.objects.Object2IntOpenCustomHashMap;
 import it.unimi.dsi.fastutil.objects.Object2IntOpenHashMap;
 import java.util.ArrayList;
 import java.util.Collections;
@@ -114,7 +_,9 @@
 
    public static record StepFeatureData(List<PlacedFeature> features, ToIntFunction<PlacedFeature> indexMapping) {
       StepFeatureData(List<PlacedFeature> p_220627_) {
-         this(p_220627_, Util.createIndexIdentityLookup(p_220627_));
+         this(p_220627_, Util.createIndexLookup(p_220627_, (p_220633_) -> {
+            return new Object2IntOpenCustomHashMap<>(p_220633_, Util.identityStrategy());
+         }));
       }
    }
 }
